<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <!-- Bootstrap CSS -->
    <!--<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">-->

    <!-- font awesome  -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">

    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
    <!--<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js" integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV" crossorigin="anonymous"></script>-->
    <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <!--<link rel="stylesheet" href="/resources/demos/style.css">-->
    <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <title></title>
    <style>
        .heading-hr, .heading-hr--dotted {
            letter-spacing: .125rem;
            align-items: center;
            display: flex;
            justify-content: center;
        }

        .s3-heading-title {
            padding: 0 1.5rem 1rem;
            font-weight: 700;
            font-size: 1.2em;
        }

        .heading-hr:after, .heading-hr:before {
            border-top: 1px solid #d9dde3;
            content: "";
            flex: 1;
            height: 1px;
            position: relative;
        }

        .heading-hr--dotted:before, .heading-hr:before {
            margin-right: 1rem;
        }

        .heading-hr--dotted:after, .heading-hr:after {
            margin-left: 1rem;
        }

        .col-sm-8 {
            border: 1px solid red;
        }

        .col-sm-5 {
            padding-left: 0;
        }


        .promocode {
            width: 200px;
            text-align: right;
            font-size: 20px;
            margin: 0.3em 0;
            padding: 9px 8px 9px 0px;
            background-color: #ffd800;
            border-radius: 50px;
        }

        .promocode_text {
            padding: 0px 0px 0px 22px;
            float: left;
        }

        textarea {
            width: 280px;
            resize: none;
        }

        .form-control {
            width: 280px;
        }

        textarea,
        input.form-control {
            border: 1px solid #ffd800;
        }

            textarea:focus {
                border-color: rgba(253, 215, 21, 0.8);
                box-shadow: 0 1px 1px rgba(0, 0, 0, 0.075) inset, 0 0 8px rgba(253, 219, 46, 0.6);
                outline: 0 none;
            }

            input.form-control:focus {
                border-color: rgba(253, 215, 21, 0.8);
                box-shadow: 0 1px 1px rgba(0, 0, 0, 0.075) inset, 0 0 8px rgba(253, 219, 46, 0.6);
                outline: 0 none;
            }

        .btn {
            background-color: #ffd800;
            margin-left: 0px;
        }
        .btn:focus {
            border-color: rgba(253, 215, 21, 0.8);
            box-shadow: 0 1px 1px rgba(0, 0, 0, 0.075) inset, 0 0 8px rgba(253, 219, 46, 0.6);
            outline: 0 none;
        }

        .row {
            padding-bottom: 1em;
        }

        /*.form-control:invalid {
            border: 1px solid red;
        }*/

        .card {
            border: 1px solid #ffd800;
            padding: 6px 0px 6px 15px;
            margin-bottom: 0.7em;
            width: 280px;
            float: left;
            clear:both;
        }

        .form-check > label {
            height:100%;
            width:100%;
        }
        .form-check-input {
            vertical-align: middle
        }

        .form-check-input:checked {
            background-color: #ffd800;
            border-color: #FFD60A;
        }
        .form-check-input:focus {
            border-color: #FFD60A;
            box-shadow: 0 0px 10px #FDA51F;
            outline: 0 none;
        }
        svg {
            float: right;
            margin-right: 1em;
            margin-top: 3px;
        }
        .submitbtn {
            width: 100%;
            padding: 5px 0;
            font-size: 20px;
            border-color: #ffd800;
            background-color: #ffd800;
            border-radius: 50px;
        }


    </style>

    <script>
        $(function () {
        //    $("#promo").submit(function () {
        //        //$('.discount').html("");
        //        var cvalue = $("#promoinput").val();
        //        console.log(`${cvalue}`);
        //        $.ajax({
        //            method: 'GET',
        //            url: "Emp.json",
        //            dataType: "json",
        //            success: function (data) {
        //                var codes = [];
        //                for (var i in data) {
        //                    codes.push(data[i].Age);
        //                }
        //                console.log(codes);
        //                //var obj = JSON.parse(data);
        //                console.log(data[0].EmpId);
        //                console.log('成功');

        //                if (cvalue == data[3].Age) {
        //                    var aa = data[0].Age == '18' ? 10 : 11;
        //                    $("#promoinput").attr("placeholder", "折扣碼正確");
        //                    $("#promoinput").val("");
        //                    //$("#promoinput").attr("placeholder", data[0].Name);
        //                    $(".discount").html(`
        //                    <td>${data[0].EmpId}</td>
        //                    <td>${data[0].EmpId}</td>
        //                    <td>-${data[0].EmpId}</td>
        //                    <td>-${aa}</td>`);
        //                } else {
        //                    $(".discount").html("")
        //                    $("#promoinput").attr("placeholder", "折扣碼無效");
        //                    $("#promoinput").val("");
        //                    console.log($("#promoinput").attr("value",'err'));
        //                    console.log($("#promoinput").attr("plajceholder","折扣碼無效"));
        //                    }
        //                },
        //            error: function (jqXHR, textStatus, errorThrown) {
        //                console.log(`錯誤${jqXHR} --> ${textStatus} --> ${errorThrown}`);
        //            }
        //        });
        //        return false;
        //    });
            
        //});
        //二
        $("#promo").submit(function () {
            //$('.discount').html("");
            var cvalue = $("#promoinput").val();
            console.log(`${cvalue}`);
            $.ajax({
                method: 'POST',
                url: '/NoXmlSpringMvcProject/back.checkcoupon',
                data: {ccode:cvalue},
                success: function (data) {
                    //實作
                    switch (data[1]) {
                        case 0:
                            $(".discount").html("")
                            $("#promoinput").attr("placeholder", "查無折扣碼");
                            $("#promoinput").val("");
                            break;
                        case 1:
                            $(".discount").html("")
                            $("#promoinput").attr("placeholder", "折扣碼過期");
                            $("#promoinput").val("");
                            break;
                        case 2:
                            $("#promoinput").attr("placeholder", "折扣碼正確");
                            $("#promoinput").val("");
                            $(".discount").html(`
                                <td>${data[0].couponName}</td>
                                <td>${1}</td>
                                <td>-${data[0].couponDiscount}</td>
                                <td>-${data[0].couponDiscount}</td>`
                            );
                            break;
                    }
                },
                error: function (jqXHR, textStatus, errorThrown) {
                    console.log(`錯誤${jqXHR} --> ${textStatus} --> ${errorThrown}`);
                }
            });
            return false;
        });
     
        });
 
    </script>
</head>
<body class="bg-light">

    <div class="container ">
        <h3 class="heading-hr s3-heading-title">餐點內容</h3>
        <!--餐點內容-->
        <div class="Meals row justify-content-around">
            <div class="col-sm-8 widget">
                <h4 class="mb-3">餐點內容:</h4>
                <table class="table-hover" style="width:100%" ;>
                    <tr>
                        <th>商品名稱</th>
                        <th>數量</th>
                        <th>單價</th>
                        <th>小計</th>
                    </tr>
                    <tr>
                        <td>可樂</td>
                        <td>1</td>
                        <td>100</td>
                        <td>100</td>
                    </tr>
                    <tfoot>
                        <tr class="discount">
                            
                        </tr>
                    </tfoot>
                </table>
                <hr />
                <form id="promo" class="needs-validation novalidate p-2" style=" width: 200px;">
                    <div class="input-group">
                        <input  id="promoinput" type="text" class="form-control" placeholder="折扣碼" value="">
                        <button  type="submit" class="btn">確認</button>
                    </div>
                </form>
                <div class="promocode">
                    <spanc class="promocode_text">合計:</spanc><span>$100</span>
                </div>
            </div>
        </div>
        <!--餐點內容結束-->
        <!--備註-->
        <form class="needs-validation novalidate">
            <div class="note row justify-content-around">
                <div class="col-sm-8 widget">
                    <h4 class="mb-3">備註:</h4>
                    <textarea name="mytext" rows="4" cols="40"></textarea>
                </div>
            </div>
            <!--備註結束-->
            <!--訂購資料-->
            <div class="orderinfo row justify-content-around">
                <div class="col-sm-8 widget">
                    <h4 class="mb-3">訂購資料:</h4>
                    <div class="col-sm-5">
                        <label for="name" class="form-label">姓名:</label>
                        <input type="text" class="form-control" id="name" placeholder="" value="" required>
                        <div class="invalid-feedback">
                            *必填
                        </div>
                    </div>
                    <div class="col-sm-5">
                        <label for="mail" class="form-label">信箱:</label>
                        <input type="email" class="form-control" id="mail" placeholder="" value="" required>
                        <div class="invalid-feedback">
                            *必填
                        </div>
                    </div>
                    <div class="col-sm-5">
                        <label for="phone" class="form-label">手機:</label>
                        <input type="tel" class="form-control" id="phone" placeholder="" value="" required>
                        <div class="invalid-feedback">
                            *必填
                        </div>
                    </div>
                </div>
            </div>
            <!--訂購資料結束-->
            <!--取餐時間-->
            <div class="note row justify-content-around">
                <div class="col-sm-8 widget">
                    <h4 class="mb-3">取餐時間:</h4>

                </div>
            </div>
            <!--取餐時間結束-->
            <!--付款方式-->
            <div class="note row justify-content-around">
                <div class="col-sm-8 widget">
                    <h4 class="mb-3">付款方式:</h4>
                    <div class="card">
                        <div class=" form-check">
                            <input id="credit" name="paymentMethod" type="radio" class="form-check-input" checked required>
                            <label class="form-check-label" for="credit">取餐付款
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-currency-exchange" viewBox="0 0 16 16">
                                    <path d="M0 5a5.002 5.002 0 0 0 4.027 4.905 6.46 6.46 0 0 1 .544-2.073C3.695 7.536 3.132 6.864 3 5.91h-.5v-.426h.466V5.05c0-.046 0-.093.004-.135H2.5v-.427h.511C3.236 3.24 4.213 2.5 5.681 2.5c.316 0 .59.031.819.085v.733a3.46 3.46 0 0 0-.815-.082c-.919 0-1.538.466-1.734 1.252h1.917v.427h-1.98c-.003.046-.003.097-.003.147v.422h1.983v.427H3.93c.118.602.468 1.03 1.005 1.229a6.5 6.5 0 0 1 4.97-3.113A5.002 5.002 0 0 0 0 5zm16 5.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0zm-7.75 1.322c.069.835.746 1.485 1.964 1.562V14h.54v-.62c1.259-.086 1.996-.74 1.996-1.69 0-.865-.563-1.31-1.57-1.54l-.426-.1V8.374c.54.06.884.347.966.745h.948c-.07-.804-.779-1.433-1.914-1.502V7h-.54v.629c-1.076.103-1.808.732-1.808 1.622 0 .787.544 1.288 1.45 1.493l.358.085v1.78c-.554-.08-.92-.376-1.003-.787H8.25zm1.96-1.895c-.532-.12-.82-.364-.82-.732 0-.41.311-.719.824-.809v1.54h-.005zm.622 1.044c.645.145.943.38.943.796 0 .474-.37.8-1.02.86v-1.674l.077.018z" />
                                </svg>
                            </label>
                        </div>
                    </div>
                    <div class="card">
                        <div class=" form-check">
                            <input id="debit" name="paymentMethod" type="radio" class="form-check-input" required>
                            <label class="form-check-label" for="debit">綠界
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-credit-card-2-back" viewBox="0 0 16 16">
                                    <path d="M11 5.5a.5.5 0 0 1 .5-.5h2a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1-.5-.5v-1z" />
                                    <path d="M2 2a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H2zm13 2v5H1V4a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1zm-1 9H2a1 1 0 0 1-1-1v-1h14v1a1 1 0 0 1-1 1z" />
                                </svg>
                            </label>
                        </div>
                    </div>
                </div>
                </div>
            <!--付款方式結束-->
            <!--送出-->
            <div class="note row justify-content-around">
                <div class="col-sm-8 widget">
                    <button class="w-100 btn btn-lg" type="submit">送出訂單</button>
                </div>
            </div>
            <!--送出結束-->
        </form>
</div>
</body>
</html>