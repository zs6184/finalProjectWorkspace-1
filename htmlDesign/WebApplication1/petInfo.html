<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title>PetInfo</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="/stylesheet/petInfo.css" /><!--CSS here-->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/js/bootstrap.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.js"></script>
    <script src="https://code.jquery.com/ui/1.13.0-alpha.1/jquery-ui.min.js"></script>
    <script src="/javascript/petInfo.js"></script> <!--JS Here-->


</head>
<body style="background-image:url(image/背景4.jpg)">
    <hr>
    <!-- 標題logo 部分 -->
    <div class="logo-area text-center">
        <div class="container h-100">
            <div class="row h-100 align-items-center">
                <div class="col-12">
                    <a href="index.html"><img src="image/浪跡2.png" alt=""></a> <!--LOGO-->
                </div>
            </div>
        </div>
    </div>
    <hr>

    <!-- nav欄部分 -->
    <div id="topbar">
        <div class="container h-100">
            <div class="row h-100 align-items-center">
                <div class="col-12">
                    <ul>
                        <li><a href="petInfo.html" target="_self">寵物領養</a></li>
                        <li><a href="index.html" target="_self">線上訂位</a></li>
                        <li><a href="index.html" target="_self">餐點介紹</a></li>
                        <li><a href="index.html" target="_self">公告專區</a></li>
                        <li><a href="index.html" target="_self">登入註冊</a></li>
                        <li><a href="index.html" target="_self">首頁</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!--橫幅圖片區域-->
    <div class="banner-area bg-img" style="background-image:url(/image/img/bg-img/cat1.jpeg);">
        <div class="container h-100">
            <div class="row h-100 align-items-center">
                <div class="col-12">
                    <div class="banner-content text-center">
                        <h2>寵物領養</h2>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!--內容-->
    <div class="container" id="container">
        <!--查詢欄位-->
        <form action="#">
            <div class="row justify-content-start" style="margin:30px;">
                <div class="col-1"><select name="category" id="category"><option value="">不限類別</option></select></div>
                <div class="col-1"><select name="sex" id="sex"><option value="">不限性別</option></select></div>
                <div class="col-2"><button type="button" class="btn btn-info text-white btn-sm">搜尋</button></div>
            </div>
        </form>

        <!--查詢結果概覽-->
            <div class="container" style="margin-bottom:30px;">
                <div class="row justify-content-start" id="infoContent">
                    <div class="col" id="infoLeft">
                       <!--左半邊--> 
                    </div>
                    <div class="col" id="infoRight">
                       <!--右半邊-->
                    </div>
                </div>
            </div>

    </div>

    <script>
        //將取得backPetInfo資料載入select選項中
        $.get("backPetInfo.html", function (data) {

            //選項欄

            //純粹取值後填入的做法，沒有篩重複值(剛好也沒有重複值)
            $(".category", data).each(function () {
                $("#category").append(`<option value="${this.textContent}">${this.textContent}</option>`);
                console.log(this.textContent);
            });

            //使用陣列裝抓到的所有選項(三個F)，因為有重複值，所以丟進Set中篩掉重複值
            var sexArr = new Array;
            $(".sex", data).each(function () {
                sexArr.push(this.textContent);
            });
            var sexArrSet = new Set(sexArr);
            var sexUnique = [...sexArrSet]; //使用展開運算符[...]轉換成為陣列
            console.log("uniqyeArr = " + sexUnique);

            sexUnique.forEach(function (v, i) { //forEach()是js的API，K-V值value是第一個參數，index是第二個
                $("#sex").append(`<option value="${v}">${v}</option>`)
                console.log("value = " + v);
            });

            //資訊欄
            var index = 0;
            $("#infoTable tr:even:not(':first')", data).each(function () {
                console.log("LEFT---" + this.textContent);
                $("#infoLeft").append(`<div class="row col-8 offset-2 border" style="margin-bottom:30px;border-radius:5px;"><div class="col-3 border border-radius:5px;">IMAGE</div><div class="col" id="${index}"></div></div>`);
                $("td:not(':last')", this).each(function () {
                    $(`#${index}`).append(`<div>${this.textContent}</div>`);
                });
                index++;
            });

            $("#infoTable tr:odd", data).each(function () {
                console.log("RIGHT---" + this.textContent);
                $("#infoRight").append(`<div class="row col-8 offset-2 border" style="margin-bottom:30px;border-radius:5px;"><div class="col-3 border border-radius:5px;">IMAGE</div><div class="col" id="${index}"></div></div>`);
                $("td:not(':last')", this).each(function () {
                    $(`#${index}`).append(`<div>${this.textContent}</div>`);
                });
                index++;
            });

        });
    </script>
</body>
</html>